
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Conform &#8212; NRN / RRN  documentation</title>
    
  <link href="../../../_static/css/theme.css" rel="stylesheet">
  <link href="../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/blank.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Validate" href="validate.html" />
    <link rel="prev" title="General Usage" href="general_usage.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../../../index.html">
<p class="title">NRN / RRN</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../index.html">
  English
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../fr/index.html">
  Français
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/jessestewart1/nrn-rrn" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://open.canada.ca/data/en/dataset/3d282116-e556-400c-9306-ca1a3cada77f" rel="noopener" target="_blank" title="Open Government">
            <span><i class="fas fa-database"></i></span>
            <label class="sr-only">Open Government</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../about.html">
   National Road Network (NRN)
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../user_guide.html">
   User Guide
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="general_usage.html">
     General Usage
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Conform
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="validate.html">
     Validate
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../product_documentation.html">
   Product Documentation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../product_documentation/reference_materials.html">
     1. Reference Materials
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../product_documentation/release_notes.html">
     2. Release Notes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../product_documentation/product_distribution_formats.html">
     3. Product Distribution Formats
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../product_documentation/data_product_specifications.html">
     4. Data Product Specifications
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../product_documentation/feature_catalogue.html">
     5. Feature Catalogue
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../product_documentation/data_exchange_model.html">
     6. Data Exchange Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../product_documentation/change_management.html">
     7. Change Management
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../product_documentation/identification_rules.html">
     8. Identification Rules
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../product_documentation/completion_rates.html">
     9. Completion Rates
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../community.html">
   Community
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../community/project_community.html">
     Project Community
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../community/contributing.html">
     Contributing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../community/dependencies.html">
     Dependencies
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#configuration-overview">
   Configuration Overview
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#directories">
     Directories
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#root-directory">
       Root Directory
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#subdirectories">
       Subdirectories
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#files">
     Files
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#file-names">
       File Names
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#file-name-integrity">
       File Name Integrity
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#structure">
     Structure
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#configuration-content">
   Configuration Content
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#metadata">
     Metadata
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       Structure
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data">
     Data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       Structure
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     Conform
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id4">
       Structure
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#no-field-mapping">
       No Field Mapping
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#direct-field-mapping">
       Direct Field Mapping
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#field-mapping-functions">
       Field Mapping Functions
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id5">
         Structure
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#function-apply-domain">
         Function:
         <code class="docutils literal notranslate">
          <span class="pre">
           apply_domain
          </span>
         </code>
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#function-concatenate">
         Function:
         <code class="docutils literal notranslate">
          <span class="pre">
           concatenate
          </span>
         </code>
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#function-direct">
         Function:
         <code class="docutils literal notranslate">
          <span class="pre">
           direct
          </span>
         </code>
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#function-map-values">
         Function:
         <code class="docutils literal notranslate">
          <span class="pre">
           map_values
          </span>
         </code>
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#function-query-assign">
         Function:
         <code class="docutils literal notranslate">
          <span class="pre">
           query_assign
          </span>
         </code>
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#function-regex-find">
         Function:
         <code class="docutils literal notranslate">
          <span class="pre">
           regex_find
          </span>
         </code>
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#function-regex-sub">
         Function:
         <code class="docutils literal notranslate">
          <span class="pre">
           regex_sub
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#field-mapping-functions-special-keys">
       Field Mapping Functions - Special Keys
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#process-separately">
         Process Separately
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#iterate-columns">
         Iterate Columns
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#field-domains">
         Field Domains
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#nested-output">
       Nested Output
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#address-segmentation">
   Address Segmentation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#output">
     Output
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#examples">
     Examples
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#segmentation-process">
     Segmentation Process
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="conform">
<h1><a class="toc-backref" href="#id6">Conform</a><a class="headerlink" href="#conform" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#conform" id="id6">Conform</a></p>
<ul>
<li><p><a class="reference internal" href="#overview" id="id7">Overview</a></p></li>
<li><p><a class="reference internal" href="#configuration-overview" id="id8">Configuration Overview</a></p>
<ul>
<li><p><a class="reference internal" href="#directories" id="id9">Directories</a></p>
<ul>
<li><p><a class="reference internal" href="#root-directory" id="id10">Root Directory</a></p></li>
<li><p><a class="reference internal" href="#subdirectories" id="id11">Subdirectories</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#files" id="id12">Files</a></p>
<ul>
<li><p><a class="reference internal" href="#file-names" id="id13">File Names</a></p></li>
<li><p><a class="reference internal" href="#file-name-integrity" id="id14">File Name Integrity</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#structure" id="id15">Structure</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#configuration-content" id="id16">Configuration Content</a></p>
<ul>
<li><p><a class="reference internal" href="#metadata" id="id17">Metadata</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id18">Structure</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#data" id="id19">Data</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id20">Structure</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id3" id="id21">Conform</a></p>
<ul>
<li><p><a class="reference internal" href="#id4" id="id22">Structure</a></p></li>
<li><p><a class="reference internal" href="#no-field-mapping" id="id23">No Field Mapping</a></p></li>
<li><p><a class="reference internal" href="#direct-field-mapping" id="id24">Direct Field Mapping</a></p></li>
<li><p><a class="reference internal" href="#field-mapping-functions" id="id25">Field Mapping Functions</a></p></li>
<li><p><a class="reference internal" href="#field-mapping-functions-special-keys" id="id26">Field Mapping Functions - Special Keys</a></p></li>
<li><p><a class="reference internal" href="#nested-output" id="id27">Nested Output</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#address-segmentation" id="id28">Address Segmentation</a></p>
<ul>
<li><p><a class="reference internal" href="#output" id="id29">Output</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id30">Examples</a></p></li>
<li><p><a class="reference internal" href="#segmentation-process" id="id31">Segmentation Process</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id7">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The <cite>conform</cite> process uses one or more <code class="docutils literal notranslate"><span class="pre">YAML</span></code> (.yaml) configuration file(s) to define the mapping of source data to
the NRN schema.</p>
<p>The NRN schema is defined in <a class="reference internal" href="../product_documentation/feature_catalogue.html"><span class="doc">Feature Catalogue</span></a>.</p>
<p>Ideally, source data would adhere to the NRN schema and have direct (1:1) field mapping. Unfortunately, this does not
reflect reality. Therefore, to accommodate the integration of as many data sources as possible, a number of functions
have been developed to manipulate source data for integration into the NRN data model.</p>
<dl class="field-list simple">
<dt class="field-odd">Field Mapping</dt>
<dd class="field-odd"><p>The process of source data integration into the NRN data model.</p>
</dd>
<dt class="field-even">Key</dt>
<dd class="field-even"><p>Individual attribute of a <code class="docutils literal notranslate"><span class="pre">YAML</span></code> file.</p>
</dd>
<dt class="field-odd">YAML</dt>
<dd class="field-odd"><p>Data serialization language commonly used for configuration files.</p>
</dd>
</dl>
</div>
<div class="section" id="configuration-overview">
<h2><a class="toc-backref" href="#id8">Configuration Overview</a><a class="headerlink" href="#configuration-overview" title="Permalink to this headline">¶</a></h2>
<div class="section" id="directories">
<h3><a class="toc-backref" href="#id9">Directories</a><a class="headerlink" href="#directories" title="Permalink to this headline">¶</a></h3>
<div class="section" id="root-directory">
<h4><a class="toc-backref" href="#id10">Root Directory</a><a class="headerlink" href="#root-directory" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">root</span></code> directory for all configuration files is: <code class="docutils literal notranslate"><span class="pre">nrn-rrn/src/conform/sources</span></code>.</p>
</div>
<div class="section" id="subdirectories">
<h4><a class="toc-backref" href="#id11">Subdirectories</a><a class="headerlink" href="#subdirectories" title="Permalink to this headline">¶</a></h4>
<p>Each configuration file must reside within a subdirectory of <code class="docutils literal notranslate"><span class="pre">root</span></code>, where the subdirectory name is the provincial /
territorial abbreviation of the data source. Accepted source abbreviations are as follows:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Abbreviation</p></th>
<th class="head"><p>Source (Province / Territory)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ab</p></td>
<td><p>Alberta</p></td>
</tr>
<tr class="row-odd"><td><p>bc</p></td>
<td><p>British Columbia</p></td>
</tr>
<tr class="row-even"><td><p>mb</p></td>
<td><p>Manitoba</p></td>
</tr>
<tr class="row-odd"><td><p>nb</p></td>
<td><p>New Brunswick</p></td>
</tr>
<tr class="row-even"><td><p>nl</p></td>
<td><p>Newfoundland and Labrador</p></td>
</tr>
<tr class="row-odd"><td><p>ns</p></td>
<td><p>Nova Scotia</p></td>
</tr>
<tr class="row-even"><td><p>nt</p></td>
<td><p>Northwest Territories</p></td>
</tr>
<tr class="row-odd"><td><p>nu</p></td>
<td><p>Nunavut</p></td>
</tr>
<tr class="row-even"><td><p>on</p></td>
<td><p>Ontario</p></td>
</tr>
<tr class="row-odd"><td><p>pe</p></td>
<td><p>Prince Edward Island</p></td>
</tr>
<tr class="row-even"><td><p>qc</p></td>
<td><p>Quebec</p></td>
</tr>
<tr class="row-odd"><td><p>sk</p></td>
<td><p>Saskatchewan</p></td>
</tr>
<tr class="row-even"><td><p>yt</p></td>
<td><p>Yukon Territory</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="files">
<h3><a class="toc-backref" href="#id12">Files</a><a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h3>
<div class="section" id="file-names">
<h4><a class="toc-backref" href="#id13">File Names</a><a class="headerlink" href="#file-names" title="Permalink to this headline">¶</a></h4>
<p>Individual configuration file names do not matter, so long as they have the required <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> extension.</p>
</div>
<div class="section" id="file-name-integrity">
<h4><a class="toc-backref" href="#id14">File Name Integrity</a><a class="headerlink" href="#file-name-integrity" title="Permalink to this headline">¶</a></h4>
<p>Each source dataset (file or layer) must be defined within its own configuration file. Similarly, each NRN dataset must
only be defined in a single configuration file per source subdirectory, otherwise the results will be overwritten by
subsequent configuration files which map to the same NRN dataset.</p>
</div>
</div>
<div class="section" id="structure">
<h3><a class="toc-backref" href="#id15">Structure</a><a class="headerlink" href="#structure" title="Permalink to this headline">¶</a></h3>
<p>Generic structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>src
├── conform
│   ├── sources
│   │   ├── &lt;source abbreviation&gt;
│   │   │   ├── &lt;configuration file name&gt;.yaml
│   │   │   ├── &lt;configuration file name&gt;.yaml
│   │   │   ...
</pre></div>
</div>
<p>Specific structure (source: New Brunswick):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>src
├── conform
│   ├── sources
│   │   ├── nb
│   │   │   ├── geonb_nbrn-rrnb_ferry-traversier.yaml
│   │   │   └── geonb_nbrn-rrnb_road-route.yaml
</pre></div>
</div>
</div>
</div>
<div class="section" id="configuration-content">
<h2><a class="toc-backref" href="#id16">Configuration Content</a><a class="headerlink" href="#configuration-content" title="Permalink to this headline">¶</a></h2>
<p>Configuration files consist of 3 main components (sections):</p>
<dl class="field-list simple">
<dt class="field-odd">Metadata</dt>
<dd class="field-odd"><p>Source metadata.</p>
</dd>
<dt class="field-even">Data</dt>
<dd class="field-even"><p>Source file and layer properties.</p>
</dd>
<dt class="field-odd">Conform</dt>
<dd class="field-odd"><p>Field mapping definitions.</p>
</dd>
</dl>
<div class="section" id="metadata">
<h3><a class="toc-backref" href="#id17">Metadata</a><a class="headerlink" href="#metadata" title="Permalink to this headline">¶</a></h3>
<p>The metadata components define all relevant details about the source data. No metadata keys are mandatory but it is
strongly encouraged to populate as many metadata keys as possible as it is the primary reference used to contextualize
and refer back to the data source, if ever required.</p>
<div class="section" id="id1">
<h4><a class="toc-backref" href="#id18">Structure</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p><strong>Generic structure:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">coverage</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">country</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">province</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">ISO3166</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">alpha2</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">country</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">subdivision</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">website</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">update_frequency</span><span class="p">:</span><span class="w"></span>
<span class="nt">license</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">url</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">text</span><span class="p">:</span><span class="w"></span>
<span class="nt">language</span><span class="p">:</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Specific structure (source: New Brunswick):</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">coverage</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">country</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca</span><span class="w"></span>
<span class="w">  </span><span class="nt">province</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nb</span><span class="w"></span>
<span class="w">  </span><span class="nt">ISO3166</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">alpha2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CA-NB</span><span class="w"></span>
<span class="w">    </span><span class="nt">country</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Canada</span><span class="w"></span>
<span class="w">    </span><span class="nt">subdivision</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">New Brunswick</span><span class="w"></span>
<span class="w">  </span><span class="nt">website</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://geonb-t.snb.ca/downloads/nbrn/geonb_nbrn-rrnb_orig.zip</span><span class="w"></span>
<span class="w">  </span><span class="nt">update_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">weekly</span><span class="w"></span>
<span class="nt">license</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://geonb.snb.ca/documents/license/geonb-odl_en.pdf</span><span class="w"></span>
<span class="w">  </span><span class="nt">text</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GeoNB Open Data License</span><span class="w"></span>
<span class="nt">language</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">en</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="data">
<h3><a class="toc-backref" href="#id19">Data</a><a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h3>
<p>The data components define the properties of the source file and layer relevant to constructing an NRN dataset.</p>
<p>Mandatory keys:</p>
<dl class="field-list simple">
<dt class="field-odd">filename</dt>
<dd class="field-odd"><p>Name of the source file, including the extension.</p>
</dd>
<dt class="field-even">driver</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">OGR</span></code> vector driver name (see: <a class="reference external" href="https://gdal.org/drivers/vector/index.html">https://gdal.org/drivers/vector/index.html</a>).</p>
</dd>
<dt class="field-odd">crs</dt>
<dd class="field-odd"><p>Coordinate Reference System authority string.</p>
</dd>
<dt class="field-even">spatial</dt>
<dd class="field-even"><p>Flag to indicate if the source is spatial.</p>
</dd>
</dl>
<p>Optional keys:</p>
<dl class="field-list simple">
<dt class="field-odd">layer</dt>
<dd class="field-odd"><p>Layer name for files containing data layers.</p>
</dd>
<dt class="field-even">query</dt>
<dd class="field-even"><p>Query used to filter data source records.</p>
</dd>
</dl>
<div class="section" id="id2">
<h4><a class="toc-backref" href="#id20">Structure</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p><strong>Generic structure:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">data</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">filename</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">layer</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">driver</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">crs</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">spatial</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">query</span><span class="p">:</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Specific structure (source: New Brunswick):</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">data</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">filename</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">geonb_nbrn-rrnb.gdb</span><span class="w"></span>
<span class="w">  </span><span class="nt">layer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Road_Segment_Entity</span><span class="w"></span>
<span class="w">  </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OpenFileGDB</span><span class="w"></span>
<span class="w">  </span><span class="nt">crs</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EPSG:2953&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">spatial</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span><span class="w"></span>
<span class="w">  </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Functional_Road_Class</span><span class="nv"> </span><span class="s">!=</span><span class="nv"> </span><span class="s">425&quot;</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id21">Conform</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>The conform components define the field mapping between the source data and NRN schema. Field mapping can be either
direct (source attribute directly maps to an NRN data attribute) or make use of a series of functions.</p>
<div class="section" id="id4">
<h4><a class="toc-backref" href="#id22">Structure</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p><strong>Generic structure:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">conform</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">&lt;NRN dataset&gt;</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">&lt;NRN dataset attribute&gt;</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;field mapping&gt;</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="no-field-mapping">
<h4><a class="toc-backref" href="#id23">No Field Mapping</a><a class="headerlink" href="#no-field-mapping" title="Permalink to this headline">¶</a></h4>
<p>Keys for NRN datasets or attributes without any source field mapping can be excluded from the configuration file or
simply left empty.</p>
</div>
<div class="section" id="direct-field-mapping">
<h4><a class="toc-backref" href="#id24">Direct Field Mapping</a><a class="headerlink" href="#direct-field-mapping" title="Permalink to this headline">¶</a></h4>
<p>NRN attributes with a direct field mapping from the source can be populated with a literal value or attribute name. The
specified value is determined to be an attribute name if it exists in the set of attributes for the source file / layer.</p>
<p><strong>Example:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">accuracy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Element_Planimetric_Accuracy</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="field-mapping-functions">
<h4><a class="toc-backref" href="#id25">Field Mapping Functions</a><a class="headerlink" href="#field-mapping-functions" title="Permalink to this headline">¶</a></h4>
<p>To define a field mapping function, the following keys must be used:</p>
<dl class="field-list simple">
<dt class="field-odd"><code class="docutils literal notranslate"><span class="pre">fields</span></code></dt>
<dd class="field-odd"><p>An attribute name or list of attribute names of the source file / layer.</p>
</dd>
<dt class="field-even"><code class="docutils literal notranslate"><span class="pre">functions</span></code></dt>
<dd class="field-even"><p>A list of function names and function-specific parameters. The first key in each listed function must
be <code class="docutils literal notranslate"><span class="pre">function</span></code> followed by the function name.</p>
</dd>
</dl>
<p>Multiple field mapping functions are referred to as <code class="docutils literal notranslate"><span class="pre">chains</span></code> and the process as <code class="docutils literal notranslate"><span class="pre">chaining</span></code>. For <code class="docutils literal notranslate"><span class="pre">chains</span></code>, the
output of each function is the input to the next function.</p>
<div class="section" id="id5">
<h5>Structure<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<p><strong>Generic structure:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;NRN dataset attribute&gt;</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">fields</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;source attribute&gt; or [&lt;source attribute&gt;, ...]</span><span class="w"></span>
<span class="w">  </span><span class="nt">functions</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;function name&gt;</span><span class="w"></span>
<span class="w">      </span><span class="nt">&lt;function parameter name&gt;</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;function parameter value&gt;</span><span class="w"></span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="function-apply-domain">
<h5>Function: <code class="docutils literal notranslate"><span class="pre">apply_domain</span></code><a class="headerlink" href="#function-apply-domain" title="Permalink to this headline">¶</a></h5>
<p><strong>Description:</strong> Enforces the domain restrictions from a specified NRN dataset attribute.</p>
<p><strong>Expects Single or Multiple Source Attributes:</strong> Single.</p>
<p><strong>Parameters:</strong></p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>table</p></td>
<td><p>NRN dataset name.</p></td>
</tr>
<tr class="row-odd"><td><p>field</p></td>
<td><p>NRN attribute name.</p></td>
</tr>
<tr class="row-even"><td><p>default</p></td>
<td><p>Default value to be used if an error is encountered.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">dirprefix</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">fields</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SPN_R_Directional_Prefix</span><span class="w"></span>
<span class="w">  </span><span class="nt">functions</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apply_domain</span><span class="w"></span>
<span class="w">      </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">strplaname</span><span class="w"></span>
<span class="w">      </span><span class="nt">field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dirprefix</span><span class="w"></span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="function-concatenate">
<h5>Function: <code class="docutils literal notranslate"><span class="pre">concatenate</span></code><a class="headerlink" href="#function-concatenate" title="Permalink to this headline">¶</a></h5>
<p><strong>Description:</strong> Concatenates values into a single string.</p>
<p><strong>Expects Single or Multiple Source Attributes:</strong> Multiple.</p>
<p><strong>Parameters:</strong></p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>columns</p></td>
<td><p>List of names assigned to the data columns when unpacked within the function.</p></td>
</tr>
<tr class="row-odd"><td><p>separator</p></td>
<td><p>Delimiter string used to join the values, default = <cite>” “</cite>.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">l_stname_c</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">fields</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">SPN_L_Street_Type_Prefix</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">SPN_L_Street_Name_Body</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">SPN_L_Street_Type_Suffix</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">  </span><span class="nt">functions</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">concatenate</span><span class="w"></span>
<span class="w">      </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">strtypre</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">namebody</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">strtysuf</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">      </span><span class="nt">separator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;</span><span class="nv"> </span><span class="s">&quot;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="function-direct">
<h5>Function: <code class="docutils literal notranslate"><span class="pre">direct</span></code><a class="headerlink" href="#function-direct" title="Permalink to this headline">¶</a></h5>
<p><strong>Description:</strong> Directly maps the given value with optional type casting. This function is purely intended to provide
a function call for direct field mapping.</p>
<p><strong>Expects Single or Multiple Source Attributes:</strong> Single.</p>
<p><strong>Parameters:</strong></p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>cast_type</p></td>
<td><p>String name of a Python type class to be casted to, default = <cite>None</cite>. Accepted values: <code class="docutils literal notranslate"><span class="pre">float</span></code>,
<code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">str</span></code>.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">l_hnumf</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">fields</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">First_House_Number_L</span><span class="w"></span>
<span class="w">  </span><span class="nt">functions</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">direct</span><span class="w"></span>
<span class="w">      </span><span class="nt">cast_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="function-map-values">
<h5>Function: <code class="docutils literal notranslate"><span class="pre">map_values</span></code><a class="headerlink" href="#function-map-values" title="Permalink to this headline">¶</a></h5>
<p><strong>Description:</strong> Maps values based on a lookup dictionary.</p>
<p><strong>Expects Single or Multiple Source Attributes:</strong> Single.</p>
<p><strong>Parameters:</strong></p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>lookup</p></td>
<td><p>Dictionary of value mappings.</p></td>
</tr>
<tr class="row-odd"><td><p>case_sensitive</p></td>
<td><p>Flag indicating if the lookup dictionary is case sensitive, default = <cite>False</cite>.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">provider</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">fields</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Element_Provider</span><span class="w"></span>
<span class="w">  </span><span class="nt">functions</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">map_values</span><span class="w"></span>
<span class="w">      </span><span class="nt">lookup</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Other</span><span class="w"></span>
<span class="w">        </span><span class="nt">2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Federal</span><span class="w"></span>
<span class="w">        </span><span class="nt">3</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provincial / Territorial</span><span class="w"></span>
<span class="w">        </span><span class="nt">4</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Municipal</span><span class="w"></span>
<span class="w">        </span><span class="nt">405</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provincial / Territorial</span><span class="w"></span>
<span class="w">        </span><span class="nt">406</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provincial / Territorial</span><span class="w"></span>
<span class="w">        </span><span class="nt">409</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Municipal</span><span class="w"></span>
<span class="w">        </span><span class="nt">412</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Other</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="function-query-assign">
<h5>Function: <code class="docutils literal notranslate"><span class="pre">query_assign</span></code><a class="headerlink" href="#function-query-assign" title="Permalink to this headline">¶</a></h5>
<p><strong>Description:</strong> Maps a single or set of values based on a lookup dictionary of queries. Non-matches will be Null.</p>
<p><strong>Expects Single or Multiple Source Attributes:</strong> Single / Multiple.</p>
<p><strong>Parameters:</strong></p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>columns</p></td>
<td><p>List of names assigned to the data columns when unpacked within the function.</p></td>
</tr>
<tr class="row-odd"><td><p>lookup</p></td>
<td><p>Dictionary of query-value mappings where the value is a nested dictionary consisting of keys:
| <code class="docutils literal notranslate"><span class="pre">value</span></code>: the desired output value for the query,
| <code class="docutils literal notranslate"><span class="pre">type</span></code>: indicator of the type of the given output value. Accepted values are <code class="docutils literal notranslate"><span class="pre">string</span></code> (for a literal value) or
<code class="docutils literal notranslate"><span class="pre">column</span></code> (for a source attribute name, the value of which will be used as the output). See
<code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.DataFrame.query()</span></code> argument <code class="docutils literal notranslate"><span class="pre">expr</span></code> for query string details.</p></td>
</tr>
<tr class="row-even"><td><p>engine</p></td>
<td><p>The engine used to process the expression, default = <cite>python</cite>. See <code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.eval()</span></code> for a complete
list of values.</p></td>
</tr>
<tr class="row-odd"><td><p>**kwargs</p></td>
<td><p>Optional keyword arguments passed to <code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.DataFrame.query()</span></code>.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">provider</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">fields</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AGENCY_NAME</span><span class="w"></span>
<span class="w">  </span><span class="nt">functions</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">query_assign</span><span class="w"></span>
<span class="w">      </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">provider</span><span class="w"></span>
<span class="w">      </span><span class="nt">lookup</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">provider.str.lower().str.contains(&#39;city of |county of |municipality of &#39;, na=False, regex=True)</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Municipal</span><span class="w"></span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w"></span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">provider.str.lower().isin([&#39;ministry of natural resources and forestry&#39;, &#39;ministry of health&#39;])</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provincial</span><span class="w"></span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w"></span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">provider.str.lower().isin([&#39;elections and statistics canada&#39;, &#39;nrcan&#39;])</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Federal</span><span class="w"></span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w"></span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">provider.str.lower() == &#39;waabnoong bemjiwang association of first nations&#39;</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Other</span><span class="w"></span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w"></span>
<span class="w">      </span><span class="nt">engine</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="function-regex-find">
<h5>Function: <code class="docutils literal notranslate"><span class="pre">regex_find</span></code><a class="headerlink" href="#function-regex-find" title="Permalink to this headline">¶</a></h5>
<p><strong>Description:</strong> Uses a regular expression (regex) to extract from the input value.</p>
<p><strong>Expects Single or Multiple Source Attributes:</strong> Single.</p>
<p><strong>Parameters:</strong></p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>pattern</p></td>
<td><p>A compilable regular expression.</p></td>
</tr>
<tr class="row-odd"><td><p>match_index</p></td>
<td><p>Positional index of the desired match returned by the regular expression.</p></td>
</tr>
<tr class="row-even"><td><p>group_index</p></td>
<td><p>Positional index of the desired capturing group within the desired match (see <code class="docutils literal notranslate"><span class="pre">match_index</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p>strip_result</p></td>
<td><p>The extracted value will be stripped from the original value, rather than returned, default =
<cite>False</cite>.</p></td>
</tr>
<tr class="row-even"><td><p>sub_inplace</p></td>
<td><p>Optional keyword arguments passed to <code class="xref py py-func docutils literal notranslate"><span class="pre">re.sub()</span></code>, default = <cite>None</cite>. Allows an input value to be
modified prior to applying to regular expression, yet return the output as if the original string were used. For
instance, to match <cite>de la</cite> from <cite>Chemin-de-la-Grande-Rivière</cite>, <code class="docutils literal notranslate"><span class="pre">sub_inplace</span></code> can be used to replace the hyphens
with spaces. If <code class="docutils literal notranslate"><span class="pre">strip_result=False</span></code> then <cite>de la</cite> will be returned, otherwise <cite>Chemin-Grande-Rivière</cite> will be
returned.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">rtnumber1</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">fields</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PHA_ROADNA</span><span class="w"></span>
<span class="w">  </span><span class="nt">functions</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">regex_find</span><span class="w"></span>
<span class="w">      </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;\\b([1-9][0-9]*)\\b&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">match_index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">      </span><span class="nt">group_index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="function-regex-sub">
<h5>Function: <code class="docutils literal notranslate"><span class="pre">regex_sub</span></code><a class="headerlink" href="#function-regex-sub" title="Permalink to this headline">¶</a></h5>
<p><strong>Description:</strong> Uses a regular expression (regex) to extract and substitute from the input value.</p>
<p><strong>Expects Single or Multiple Source Attributes:</strong> Single.</p>
<p><strong>Parameters:</strong></p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>**kwargs</p></td>
<td><p>Keyword arguments passed to <code class="xref py py-func docutils literal notranslate"><span class="pre">re.sub()</span></code>. This function expands the argument <code class="docutils literal notranslate"><span class="pre">repl</span></code> such that it
can be a compilable regular expression or a dictionary of value mappings.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">rtename1en</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">fields</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PHA_ROADNA</span><span class="w"></span>
<span class="w">  </span><span class="nt">functions</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">regex_sub</span><span class="w"></span>
<span class="w">      </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;\\b(No.</span><span class="nv"> </span><span class="s">[1-9][0-9]*)\\b&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">repl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="field-mapping-functions-special-keys">
<h4><a class="toc-backref" href="#id26">Field Mapping Functions - Special Keys</a><a class="headerlink" href="#field-mapping-functions-special-keys" title="Permalink to this headline">¶</a></h4>
<div class="section" id="process-separately">
<h5>Process Separately<a class="headerlink" href="#process-separately" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">process_separately</span></code> is a special key which can be included with the mandatory field mapping keys (<code class="docutils literal notranslate"><span class="pre">fields</span></code> and
<code class="docutils literal notranslate"><span class="pre">functions</span></code>). When <code class="docutils literal notranslate"><span class="pre">process_separately:</span> <span class="pre">True</span></code>, multiple source attributes can be mapped to field mapping functions
which normally accept only a single source attribute.</p>
<p>The purpose of this special key is to allow multiple source attributes to be mapped to the same NRN attribute when the
field mapping is not direct.</p>
<p>The output values of <code class="docutils literal notranslate"><span class="pre">process_separately</span></code> will be nested.</p>
<p><strong>Example:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">placename</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">fields</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">SPN_L_Place_Name</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">SPN_R_Place_Name</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">  </span><span class="nt">process_separately</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span><span class="w"></span>
<span class="w">  </span><span class="nt">functions</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">map_values</span><span class="w"></span>
<span class="w">      </span><span class="nt">lookup</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Aboujagane</span><span class="w"></span>
<span class="w">        </span><span class="nt">2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Acadie Siding</span><span class="w"></span>
<span class="w">        </span><span class="nt">3</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Acadieville</span><span class="w"></span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="iterate-columns">
<h5>Iterate Columns<a class="headerlink" href="#iterate-columns" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">iterate_cols</span></code> is a special key which can be included with the keys specific to each function. <code class="docutils literal notranslate"><span class="pre">iterate_cols</span></code>
accepts a list of integers representing the positional index of the source attributes listed by <code class="docutils literal notranslate"><span class="pre">fields</span></code>. When
populated, only the source attributes indicated by <code class="docutils literal notranslate"><span class="pre">iterate_cols</span></code> are processed by the defined field mapping
function. Source attributes not specified by <code class="docutils literal notranslate"><span class="pre">iterate_cols</span></code> will retain their values.</p>
<p>The purpose of this special key is to allow a <code class="docutils literal notranslate"><span class="pre">chain</span></code> where only some source attributes require additional processing
by certain field mapping functions.</p>
<p><strong>Example:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">l_stname_c</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">fields</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">L_Direction_Prefix</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">L_Type_Prefix</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">L_Article</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">L_Name_Body</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">L_Type_Suffix</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">L_Direction_Suffix</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">  </span><span class="nt">functions</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">map_values</span><span class="w"></span>
<span class="w">      </span><span class="nt">iterate_cols</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">5</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">      </span><span class="nt">lookup</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">North</span><span class="w"></span>
<span class="w">        </span><span class="nt">2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">South</span><span class="w"></span>
<span class="w">        </span><span class="nt">3</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">East</span><span class="w"></span>
<span class="w">        </span><span class="nt">4</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">West</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">concatenate</span><span class="w"></span>
<span class="w">      </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">dirprefix</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">strtypre</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">starticle</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">namebody</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">strtysuf</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">dirsuffix</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">      </span><span class="nt">separator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;</span><span class="nv"> </span><span class="s">&quot;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="field-domains">
<h5>Field Domains<a class="headerlink" href="#field-domains" title="Permalink to this headline">¶</a></h5>
<p>When using any field mapping function which accepts a regular expression, the keyword <code class="docutils literal notranslate"><span class="pre">domain_&lt;dataset&gt;_&lt;attribute&gt;</span></code>
can be used to insert the restricted domain values of any NRN attribute into the expression, separated by the <code class="docutils literal notranslate"><span class="pre">or</span></code>
operator <code class="docutils literal notranslate"><span class="pre">&quot;|&quot;</span></code>.</p>
<p><strong>Example (raw):</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">dirprefix</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">fields</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">L_Directional_Prefix</span><span class="w"></span>
<span class="w">  </span><span class="nt">functions</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">regex_find</span><span class="w"></span>
<span class="w">      </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;\\b(domain_strplaname_dirprefix)\\b(?!$)&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">match_index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">      </span><span class="nt">group_index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
</pre></div>
</div>
<p>The above field mapping definition will be converted to:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">dirprefix</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">fields</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">L_Directional_Prefix</span><span class="w"></span>
<span class="w">  </span><span class="nt">functions</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">regex_find</span><span class="w"></span>
<span class="w">      </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;\\b(None|North|South|East|West|Northwest|Northeast|Southwest|Southeast|Central|Centre)\\b(?!$)&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">match_index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">      </span><span class="nt">group_index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition-note admonition">
<p class="admonition-title">Note</p>
<p>Only a condensed list of domain values are shown in order to conserve space.</p>
</div>
</div>
</div>
<div class="section" id="nested-output">
<h4><a class="toc-backref" href="#id27">Nested Output</a><a class="headerlink" href="#nested-output" title="Permalink to this headline">¶</a></h4>
<p>Exclusive to the NRN dataset <code class="docutils literal notranslate"><span class="pre">strplaname</span></code>, following the complete field mapping process, if any output attributes are
populated by nested values, such as a <code class="docutils literal notranslate"><span class="pre">list</span></code>, all records within that dataset will be duplicated such that the first
nested value of each nested attribute becomes the actual attribute value for the first duplicated instance and the
second nested value of each nested attribute becomes the actual attribute value for the second duplicated instance.</p>
<p>This exclusive logic for NRN dataset <code class="docutils literal notranslate"><span class="pre">strplaname</span></code> allows for attributes with left- and right-side representation to
be assigned to a single NRN attribute.</p>
<p><strong>Example:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">placename</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">SPN_L_Place_Name</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">SPN_R_Place_Name</span><span class="p p-Indicator">]</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="address-segmentation">
<h2><a class="toc-backref" href="#id28">Address Segmentation</a><a class="headerlink" href="#address-segmentation" title="Permalink to this headline">¶</a></h2>
<p>The NRN <cite>conform</cite> process includes a special process to segment addresses contained within a Point dataset into ranges.
For address segmentation, no <code class="docutils literal notranslate"><span class="pre">conform</span></code> key exists and, instead, an additional key <code class="docutils literal notranslate"><span class="pre">segment</span></code> is included within the
<code class="docutils literal notranslate"><span class="pre">data</span></code> key as has the following raw structure:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">segment</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">address_fields</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">street</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">field</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">regex_sub</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">pattern</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">repl</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">number</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">field</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">regex_sub</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">pattern</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">repl</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">suffix</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">field</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">regex_sub</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">pattern</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">repl</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">address_join_field</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">fields</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">separator</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">roadseg_join_field</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">fields</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">separator</span><span class="p">:</span><span class="w"></span>
</pre></div>
</div>
<p>This data structure contains 3 mandatory keys:</p>
<dl class="field-list simple">
<dt class="field-odd"><code class="docutils literal notranslate"><span class="pre">address_fields</span></code></dt>
<dd class="field-odd"><p>Defines how to extract address components from the source data. Only the basic attribute
components of <code class="docutils literal notranslate"><span class="pre">street</span></code> (street name), <code class="docutils literal notranslate"><span class="pre">number</span></code> (address number), and <code class="docutils literal notranslate"><span class="pre">suffix</span></code> (address
number suffix) are accepted. Acceptable values are:
| a) An attribute name or,
| b) A <code class="docutils literal notranslate"><span class="pre">regex_sub</span></code> dictionary consisting of keys <code class="docutils literal notranslate"><span class="pre">pattern</span></code> and <code class="docutils literal notranslate"><span class="pre">repl</span></code> which will be passed
to <code class="xref py py-func docutils literal notranslate"><span class="pre">re.sub()</span></code>.</p>
</dd>
<dt class="field-even"><code class="docutils literal notranslate"><span class="pre">address_join_field</span></code></dt>
<dd class="field-even"><p>Attribute of the address source used to join with NRN dataset <code class="docutils literal notranslate"><span class="pre">roadseg</span></code>. Acceptable values
are:
| a) An attribute name or,
| b) A dictionary consisting of keys defining the concatenation of address source attributes:
| <code class="docutils literal notranslate"><span class="pre">fields</span></code>: A list of address source attributes.
| <code class="docutils literal notranslate"><span class="pre">separator</span></code>: A delimiter used to concatenate the attributes.</p>
</dd>
<dt class="field-odd"><code class="docutils literal notranslate"><span class="pre">roadseg_join_field</span></code></dt>
<dd class="field-odd"><p>Attribute of NRN dataset <code class="docutils literal notranslate"><span class="pre">roadseg</span></code> used to join with the address source. Acceptable values
are:
| a) An attribute name or,
| b) A dictionary consisting of keys defining the concatenation of NRN dataset <code class="docutils literal notranslate"><span class="pre">roadseg</span></code>
attributes:
| <code class="docutils literal notranslate"><span class="pre">fields</span></code>: A list of NRN dataset <code class="docutils literal notranslate"><span class="pre">roadseg</span></code> attributes.
| <code class="docutils literal notranslate"><span class="pre">separator</span></code>: A delimiter used to concatenate the attributes.</p>
</dd>
</dl>
<div class="section" id="output">
<h3><a class="toc-backref" href="#id29">Output</a><a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h3>
<p>The output dataset will contain all addressing attributes of the NRN dataset <code class="docutils literal notranslate"><span class="pre">addrange</span></code> and will use the provided
attributes (<code class="docutils literal notranslate"><span class="pre">address_join_field</span></code> and <code class="docutils literal notranslate"><span class="pre">roadseg_join_field</span></code>) to be joined to whichever source dataset is mapped to
NRN dataset <code class="docutils literal notranslate"><span class="pre">roadseg</span></code>. Therefore, all addressing attributes of <code class="docutils literal notranslate"><span class="pre">addrange</span></code> can be used in the configuration file for
NRN dataset <code class="docutils literal notranslate"><span class="pre">roadseg</span></code> since they will exist on the source dataset prior to the execution of the field mapping process.</p>
</div>
<div class="section" id="examples">
<h3><a class="toc-backref" href="#id30">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p><strong>Simple Example (source: Prince Edward Island):</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">segment</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">address_fields</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">street</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">street_nm</span><span class="w"></span>
<span class="w">    </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">street_no</span><span class="w"></span>
<span class="w">    </span><span class="nt">suffix</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">address_join_field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">street_nm</span><span class="w"></span>
<span class="w">  </span><span class="nt">roadseg_join_field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">street_nm</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Advanced Example (source: Yukon Territory):</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">segment</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">address_fields</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">street</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">street</span><span class="w"></span>
<span class="w">    </span><span class="nt">number</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w"></span>
<span class="w">      </span><span class="nt">regex_sub</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;[^\\d]&quot;</span><span class="w"></span>
<span class="w">        </span><span class="nt">repl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">suffix</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w"></span>
<span class="w">      </span><span class="nt">regex_sub</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;\\d+&quot;</span><span class="w"></span>
<span class="w">        </span><span class="nt">repl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">address_join_field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">street</span><span class="w"></span>
<span class="w">  </span><span class="nt">roadseg_join_field</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">fields</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">dirprefix</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">strtypre</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">namebody</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">strtysuf</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">dirsuffix</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">    </span><span class="nt">separator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;</span><span class="nv"> </span><span class="s">&quot;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="segmentation-process">
<h3><a class="toc-backref" href="#id31">Segmentation Process</a><a class="headerlink" href="#segmentation-process" title="Permalink to this headline">¶</a></h3>
<p>The following documents describe the address segmentation process:</p>
<p><a class="reference external" href="/source/_static/reports/address_segmentation_british_columbia.html">Address Segmentation - British Columbia</a></p>
<p><a class="reference external" href="/source/_static/reports/address_segmentation_yellowknife.html">Address Segmentation - Yellowknife</a></p>
</div>
</div>
</div>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="general_usage.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">General Usage</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="validate.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Validate</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, Statistics Canada / Statistique Canada.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.1.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>